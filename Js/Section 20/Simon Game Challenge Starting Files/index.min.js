let buttons=document.querySelectorAll(".btn"),sequence=[],colors={yellow:1,blue:2,green:3,red:4},counter=0,levelCounter=1,onGame=!1;function addPressed(e,t){let n=document.querySelector("."+e);playSound(e,t),n.classList.add("pressed"),setTimeout((()=>{n.classList.remove("pressed")}),100)}function generateSequence(e){let t=0;for(let n=0;n<100;n++)t=Math.floor(4*Math.random())+1,e.push(t)}function changeBackgroundColor(){let e=document.querySelector("body");e.classList.add("game-over"),setTimeout((()=>{e.classList.remove("game-over")}),100)}function game(e,t,n){let o=e[t],c=Object.keys(n).find((e=>n[e]===o)),l=$("."+c);setTimeout((()=>{l.fadeTo("fast",0),playSound(c)}),500),setTimeout((()=>{l.fadeTo("fast",1)}),500)}function startGame(e){$("#level-title").text("Level 1"),generateSequence(e)}function verifySequence(e,t,n,o){return o[n]==e[t]?t+1:(changeBackgroundColor(),!1)}function playSound(e,t){if(0==t){new Audio("./sounds/wrong.mp3").play()}else{new Audio("./sounds/"+e+".mp3").play()}}buttons.forEach((e=>{e.addEventListener("click",(()=>{if(1==onGame){let t=e.classList;checkSequence=verifySequence(sequence,counter,t[1],colors),addPressed(t[1],checkSequence),0!=checkSequence?(counter=checkSequence,counter>=levelCounter&&(game(sequence,levelCounter,colors),levelCounter+=1,$("#level-title").text("Level "+levelCounter),counter=0)):(onGame=checkSequence,counter=0,levelCounter=1,sequence.length=0,$("#level-title").text("Game over! Press any key to restart"))}else{addPressed(e.classList[1]),changeBackgroundColor()}}))})),document.addEventListener("keydown",(()=>{0==sequence.length&&(startGame(sequence),onGame=!0,game(sequence,counter,colors))}));